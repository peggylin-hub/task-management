<?xml version="1.0" encoding="UTF-8" ?>
<Shell
    x:Class="TaskManagementApp.AppShell"
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    xmlns:local="clr-namespace:TaskManagementApp"
    xmlns:views="clr-namespace:TaskManagementApp.Views"
    Shell.FlyoutBehavior="Locked"
    Title="TaskManagementApp">

    <Shell.FlyoutContent>
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="40" />
                <RowDefinition Height="*" />
            </Grid.RowDefinitions>
            
            <!-- Header with Pin/Hide Controls -->
            <Grid Grid.Row="0" BackgroundColor="MediumPurple" Padding="5">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="Auto" />
                    <ColumnDefinition Width="Auto" />
                </Grid.ColumnDefinitions>
                
                <Label Grid.Column="0" 
                       Text="Task Management" 
                       TextColor="White" 
                       FontSize="20" 
                       FontAttributes="Bold"
                       VerticalOptions="Center" />
                
                <Button Grid.Column="1" 
                        x:Name="PinButton"
                        Text="ðŸ“Œ" 
                        Clicked="OnPinClicked"
                        BackgroundColor="Transparent"
                        TextColor="White"
                        FontSize="16"
                        WidthRequest="30"
                        HeightRequest="30" />
                
                <Button Grid.Column="2" 
                        Text="âœ•" 
                        Clicked="OnHideClicked"
                        BackgroundColor="Transparent"
                        TextColor="White"
                        FontSize="16"
                        WidthRequest="30"
                        HeightRequest="30" />
            </Grid>
            
            <!-- Todo List in Flyout -->
            <ScrollView Grid.Row="1" Padding="15">
				<StackLayout Spacing="10">
					<CollectionView x:Name="FlyoutTodoList" 
                                    HeightRequest="200">
                        <CollectionView.ItemTemplate>
                            <DataTemplate>
                                <Grid Padding="5" ColumnDefinitions="Auto,*">
                                    <CheckBox Grid.Column="0" 
                                              IsChecked="{Binding IsCompleted}" />
                                    <Label Grid.Column="1" 
                                           Text="{Binding Title}" 
                                           VerticalOptions="Center"
                                           FontSize="14"
                                           Margin="10,0,0,0" />
                                </Grid>
                            </DataTemplate>
                        </CollectionView.ItemTemplate>
                    </CollectionView>
                    
                    <Button Text="+ Add Todo" 
                            Clicked="OnAddFlyoutTodoClicked"
                            FontSize="14"
                            HeightRequest="40" />
                    
                    <!-- Navigation Menu -->
                    <BoxView HeightRequest="1" 
                             Color="LightGray" 
                             Margin="0,20,0,10" />
                    
                    <Label Text="Navigation" 
                           FontAttributes="Bold"
                           Margin="0,10,0,5" />
                    
                    <Button Text="ðŸ  Home" 
                            Clicked="OnHomeClicked"
                            BackgroundColor="Transparent"
                            TextColor="Black"
                            HorizontalOptions="Start" />
                </StackLayout>
            </ScrollView>
        </Grid>
    </Shell.FlyoutContent>

    <ShellContent
        Title="Home"
        ContentTemplate="{DataTemplate views:MainPage}"
        Route="MainPage" />

</Shell>
